<!DOCTYPE html> 
<html> 
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<title>{lingzh::C('site_name')} - 用户注册</title>
<meta name="keywords" content="{lingzh::C('keyword')}"/>
<meta name="description" content="{lingzh::C('content')}"/>
<meta http-equiv="Page-Exit" content="blendTrans(Duration=1.0)">
<!--meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" -->
<script type="text/javascript" src="/js/jquery.min.js"></script>
<link href="/themes/a/css/home.css" rel="stylesheet" type="text/css">
<style>

.mask{position: fixed;top: 0px;left: 0px;background-color: rgb(17, 33, 2);opacity: 0.8;height: 100%;width: 100%;}
body {background-image: url(/themes/a/images/bg.jpg); background-color: #0a8dbd;background-position: 50% 0%;background-repeat: repeat no-repeat;}
.page-main{width: 752px;margin-left: auto; margin-right: auto; margin-top:50px; }
.reg-page {margin:20px  0px 40px; border-radius: 10px; padding: 15px; background-color: #90cde8;}
.reg-page .reg-title {background-color: #0b7dcb;text-align:center;font-size:24px;color:#ffffff;height:90px; line-height:63px;border-radius: 10px 10px 0 0;}
.reg-page .reg-title .logo{float: left;width: 230px; padding:10px 0 0 20px;}
.reg-page .reg-title .reg-name{float: left;width: 260px;text-align: center; font-size:40px; margin-left:60px; margin-top:15px; font-family:黑体; font-weight:bolder;}
.reg-page .reg-form {background-color:#eef3f9; height:700px; border-radius:0 0 10px 10px ; }
.reg-page .reg-form table {float: right;width:100%; padding:40px 20px 0px 20px;}
.reg-page .reg-form table tr {margin-bottom:15px; line-height:50px;}
.text {width:55%;  padding: 5px; line-height:25px;}
.reg-page .reg-form table .submit:hover {background: #2F81BF;}
.reg-page .reg-form table .submit { position: relative ; left:-60px; top: 17px;width: 120px;height: 45px;background: #82bf07;color: #FFF;border: 0px;cursor: pointer;padding: 7px 30px;margin-left: 15px; border-radius: 5px; font-size: 24px;background:-moz-linear-gradient(top, #518708 , #82bf07 );  font-family:"微软雅黑"; font-weight:bolder;background:-webkit-gradient(linear, 0 0, 0 bottom, from(#82bf07), to(#518708));/*Safari 、Chrome*/
}

.STYLE1 {color: #FF0000}
.STYLE2 { color: #aeadad;
font-size: 12px; font-family:宋体;}


#focus-area {position:absolute;background-color:#90cde8; border-radius:10px; border:#000;width:717px; height:205px; padding:15px;}
#focus-area strong.title, #error-area strong.title { background-color: #0b7dcb;text-align:center;font-size:40px;color:#ffffff;height:68px; line-height:70px;border-radius: 10px 10px 0 0; font-family:黑体; padding:15px 0px 15px 0px}

#focus-area strong {   display: block; text-align: center;}
#focus-area strong.focus-text span { color:#bf0808; font-size:22px;}
#focus-area strong.focus-text { margin: 40px auto 10px; display: block; text-align: center; color:#0A4268; font-size:22px; line-height:36px;}
#focus-area strong.sendmsg-text { margin: 5px auto; display: block; text-align: center; color:#0a4268; font-size:22px; margin-bottom:15px;}
#focus-area img{ position: relative;left: 0px; margin: 0px auto; display: block; width:280px; height:280px; }
#focus-area .submit1:hover{ background: #2F81BF; }
#focus-area .submit1 {position: relative;left: 250px;top: 10px;width: 120px;height: 35px;background: #82bf07;color: #FFF;border: 0px;cursor: pointer;padding: 15px 20px 0px;margin-left: 15px; border-radius: 5px; font-size: 24px;background:-moz-linear-gradient(top, #518708 , #82bf07 );  font-family:"微软雅黑"; font-weight:bolder;background:-webkit-gradient(linear, 0 0, 0 bottom, from(#82bf07), to(#518708));}
#focus-area a { margin: 10px auto; display: block; text-align:center; }


#error-area {position:absolute;background-color:#90cde8; border-radius:10px; border:#000;width:496px; height:300px; padding:15px;}
#error-area strong.error-text { position: relative;top: 30px;margin: 20px auto; display: block; text-align: center; color:#4f4f4f; font-size:24px;}
#error-area .submit {position: relative;left: 160px;top: 40px;width: 120px;height: 45px;background: #82bf07;color: #FFF;border: 0px;cursor: pointer;padding: 7px 30px;margin-left: 15px; border-radius: 5px; font-size: 24px;background:-moz-linear-gradient(top, #518708 , #82bf07 );  font-family:"微软雅黑"; font-weight:bolder;background:-webkit-gradient(linear, 0 0, 0 bottom, from(#82bf07), to(#518708));}/*Safari 、Chrome*/
#error-area .submit:hover{ background: #2F81BF; }
#error-area strong{ display:block; text-align:center; }
#error-area button{ display:block; text-align:center; margin:0 auto; }
table th{ color:#0A4268; font-size:14px; padding-left:20px;}


</style>
</head>
<body>




<div class="page-main">
  <div class="reg-page">
    <div class="reg-title">
        <div class="logo"><img src="{lingzh::C('site_login_logo')}"></img></div>
      <div class="reg-name" >用户注册</div>
    </div>
    <div class="reg-form" id="reg-area">
<!--      <form action="{lingzh::U('Users/checkreg')}" method="post" class="login"> -->
    <table>
      <tbody>
        <tr>			
          <th><span class="STYLE1">*</span>&nbsp;用户名</th>
          <td>
            <input class="text"  type="text" name="username">
            <span class="STYLE2">字母和数字组合</span>
          </td>
        </tr>
        <tr>
          <th><span class="STYLE1">*</span>&nbsp;邮&nbsp;箱</th>
          <td>
            <input class="text" type="text" name="email">
          </td>
        </tr>
        <tr>
          <th><span class="STYLE1">*</span>&nbsp;账户密码</th>
          <td>
            <input class="text" type="password" name="password">
        </tr>
		<tr>
          <th><span class="STYLE1">*</span>&nbsp;重复密码</th>
          <td>
            <input class="text" type="password" name="repassword"> &nbsp;<span class="STYLE2">请再重复输入一次密码</span>
          </td>
        </tr>
	    <tr>
          <th><span class="STYLE1">*</span>&nbsp;联&nbsp;&nbsp;系&nbsp;人</th>
          <td>
            <input class="text" type="text" name="name"> 
            &nbsp;<span class="STYLE2">请填写您的姓名</span>                       
	      </td>
        </tr>
		<tr>
          <th><span class="STYLE1">*</span>&nbsp;手机号码</th> 
          <td>
			<input class="text" type="text" name="tel" > &nbsp;<span class="STYLE2">请填写11位的手机号码</span>                       
		  </td>
        </tr>
		<tr>
          <th><span class="STYLE1">*</span>&nbsp;公司名称</th>
          <td>
            <input class="text" type="text" name="company"> 
            &nbsp;<span class="STYLE2">请填写商家或公司名称</span>
	      </td>
            </tr>
			<tr>
              <th><span class="STYLE1">*</span>&nbsp;所属行业</th>
              <td>
                <input class="text" type="text" name="industry"> 
              </td>
            </tr>
			<tr>
              <th><span class="STYLE1">*</span>&nbsp;所在城市</th>
              <td>
                <input class="text" type="text" name="city"> 
              </td>
            </tr>
			<tr>
              <th><span class="STYLE1">*</span>&nbsp;职&nbsp;&nbsp;&nbsp;&nbsp;位</th>
              <td>
                <input class="text" type="text" name="pos"> &nbsp;<span class="STYLE2">请填写您的职位</span></td>
            </tr>
            <tr>
              <td align="center" colspan="2">
                <input class="submit" id="reg-btn" type="submit" value="注 册"></input>
              </td >
            </tr>
          </tbody>
		</table>
<!--      </form> -->
    </div>
  </div>
</div>

</div>

<script type="text/javascript">
$(document).ready(function(){     
  $("#reg-btn").click(function(){  
    registerMe();
  });  
});  

function registerMe() {
   var username = $('input[name="username"]').val();
   var password = $('input[name=password]').val();
   var repassword = $('input[name=repassword]').val();
   var name = $('input[name=name]').val();
   var tel = $('input[name=tel]').val();
   var company = $('input[name=company]').val();
   var industry = $('input[name=industry]').val();
   var city = $('input[name=city]').val();
   var pos = $('input[name=pos]').val();
   var email = $('input[name=email]').val();
    $.ajax({
         url     : "/index.php?g=User&m=Index&a=register",
         dataType: "json",
         type    : "POST",
         data    : {
            username : username,
            password  : password,
            repassword : repassword,
            name    : name, 
			tel : tel,
			company : company,
			industry : industry,
			city : city,
			pos : pos,
      email : email
         },
         success    : onSuccessHandler,
         error      : onErrorHandler,
         complete   : function(XMLHttpRequest, textStatus){
            //console.log('当请求完成之后调用这个函数，无论成功或失败.  请求类型:'+textStatus);  
         },
         timeout    : 3000       
        
       })

}

function onSuccessHandler(ret) {
    
	 if (ret['status'] == 0) {
         popUp($("#focus-area"));
         $("#mask_s").show();
	 } else {
         $("#error-area strong.error-text").text(ret['error']);
        popUp($("#error-area"));

        $("#mask_s").show();

	 }
}

function onErrorHandler(event, jqxhr, settings, exception) {
    alert("亲，网络不给力，继续努力哦！^_^.");
}

function popUp(popName){
//	var _scrollHeight = $(document).scrollTop() ;//获取当前窗口距离页面顶部高度
	var	_windowHeight = $(window).height() ;//获取当前窗口高度
	var	_windowWidth = $(window).width();//获取当前窗口宽度
	var _popupHeight = popName.height();//获取弹出层高度
	var _popupWeight = popName.width();//获取弹出层宽度
	//var _posiTop = (_windowHeight - _popupHeight)/2 + _scrollHeight;
	var _posiTop = (_windowHeight - _popupHeight)/2 ;
	var _posiLeft = (_windowWidth - _popupWeight)/2;
	popName.css({"left": _posiLeft + "px","top":_posiTop + "px","display":"block", "z-index":"999"});//设置position	
        
}

function popDown(popName){
    popName.css("display","none");
    $("#mask_s").hide();


}
function lighton(pName) {
    pName.css("display","none");
    
}
function lightoff(pName) {
    pName.css({"display":"block","z-index":998});
};
</script>

<div id="mask_s" class="mask"  style="display:none"></div>
<div id="focus-area" style="display:none">
  <div class="think-login" style="height:200px; background-color :#eef3f9; border-radius:10px; ">
    <strong class="title">注册成功！</strong>
    <a href="{lingzh::U('User/Index/login')}" class="submit1">登录</a>
  </div>
</div>



<div  id="error-area" style="display:none">
    <div class="think-login" style="height:300px; background-color :#eef3f9; border-radius:10px; ">
     
    <strong class='title'>出错啦！</strong>
    <strong class="error-text"></strong>
   <button class="submit" onclick="popDown($('#error-area'))" id="error-cls-btn">返回</button>
    
 
  </div>
</div>
</body>
<include file="lingzh:footer"/>

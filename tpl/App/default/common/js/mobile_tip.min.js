/*** app.js ***/
function toTopHide() {
	if(!document.getElementById("toTop")) return;
    document.getElementById("toTop").style.display = document.documentElement.scrollTop + document.body.scrollTop > 900 ? "block": "none"
}
function show_action() {
    $("#menulist").removeClass("show"),
    "none" == $("#toTop_div").css("display") ? $("#toTop_div").css("display", "block") : $("#toTop_div").css("display", "none");
    var a = window.location.href;
    $("#qrcode").empty(),
    $("#qrcode").qrcode({
        width: 180,
        height: 180,
        correctLevel: 0,
        text: a
    }),
    window.event.cancelBubble = !0
}
function openMore() {
    $("#page").hide(),
    $("#more-class").show()
}
function backList() {
    $("#page").show(),
    $("#more-class").hide()
}
jQuery.post = function(a, b, c, d) {
    return d = d || "json",
    jQuery.isFunction(b) && (d = d || c, c = b, b = void 0),
    jQuery.ajax({
        type: "post",
        url: a,
        data: b,
        success: c,
        dataType: d
    })
},
$(document).ready(function() {
    $("body").height() < $(window).height() && $("body").height($(window).height()),
    $("div.swipe img").each(function() {
        var a = $(this);
        setTimeout(function() {
            a.attr("src", a.attr("lazysrc"))
        },
        50)
    }),
    $("img.lazysrc").each(function() {
        $(window).height() > $(this).offset().top && $(this).attr("src", $(this).attr("lazysrc")),
        $(this).one("appear",
        function() {
            $(this).attr("src", $(this).attr("lazysrc"))
        })
    }),
    $("#menu").on("click",
    function() {
        return $("#langlist").removeClass("show"),
        "none" == $("#menulist").css("display") ? ($("#menulist").addClass("show"), $("#container").height() < $("#menulist").height() && $("#container").height($("#menulist").height())) : $("#menulist").removeClass("show"),
        $("#toTop_div").css("display", "none"),
        !1
    }),
    $("#menulist").on("click",
    function() {
        $("#menulist").removeClass("show")
    }),
    $("#lang").on("click",
    function() {
        return $("#menulist").removeClass("show"),
        "none" == $("#langlist").css("display") ? $("#langlist").addClass("show") : $("#langlist").removeClass("show"),
        $("#toTop_div").css("display", "none"),
        !1
    }),
    $("#langlist").on("click",
    function() {
        $("#langlist").removeClass("show")
    }),
    $("#page").bind("click",
    function() {
        return $("#toTop_div").css("display", "none"),
        $("#menulist").removeClass("show"),
        $("#langlist").removeClass("show"),
        $(".dropdown-menu-top").removeClass("show"),
        !0
    }),
    $(window).bind("scroll",
    function() {
        toTopHide(),
        $("img.lazysrc").each(function() {
            var a = $(window).height() + $(window).scrollTop() + 200;
            a >= $(this).offset().top && $(this).trigger("appear")
        })
    })
});
var appUtil = {
    setCookie: function(a, b, c) {
        var d, e, f, g, h;
        appUtil.delCookie(a),
        c = c || {},
        null === b && (b = "", c = $.extend({},
        c), c.expires = -1),
        d = "",
        c.expires && ("number" == typeof c.expires || c.expires.toUTCString) && ("number" == typeof c.expires ? (e = new Date, e.setTime(e.getTime() + 1e3 * 60 * 60 * 24 * c.expires)) : e = c.expires, d = "; expires=" + e.toUTCString()),
        f = c.path ? "; path=" + c.path: "/",
        g = c.domain ? "; domain=" + c.domain: "",
        h = c.secure ? "; secure": "",
        document.cookie = [a, "=", encodeURIComponent(b), d, f, g, h].join("")
    },
    getCookie: function(a) {
        var c, d, e, f, b = null;
        if (document.cookie && "" != document.cookie) for (c = document.cookie.split(";"), d = 0; d < c.length; d++) e = jQuery.trim(c[d]),
        f = new RegExp("^" + a + "=", "ig"),
        f.test(e) && (b = decodeURIComponent(e.replace(f, "")));
        return b
    },
    delCookie: function(a, b) {
        b = b || {};
        var c = b.path ? "; path=" + b.path: "/";
        document.cookie = a + "=" + "; expires=Thu, 01-Jan-70 00:00:01 GMT" + c
    },
    alert: function(a) {
        var c, d, b = this;
        this.msg_back || (c = '<div id="msg_back" onclick="appUtil.hideAlert();" style="display:none;position:absolute;background-color: #666;width:100%;height:100%;left:0px;top:0px;filter:alpha(opacity=10);opacity:0.1;z-index:80;"></div>', d = '<div id="msg_body" onclick="appUtil.hideAlert();" style="display:none;position:fixed;overflow:hidden;border-radius:5px;text-align:center;z-index:81;width:90%;color:#FFF;height:50px;line-height:50px;top:50px;left:50%;margin-left:-45%;filter:alpha(opacity=60);opacity: 0.8;background:#000;"></div>', this.msg_back = $(c), this.msg_body = $(d), this.msg_back.appendTo(document.body), this.msg_body.appendTo(document.body)),
        this.msg_body.html(a),
        b.msg_back.show(),
        b.msg_body.show(),
        $.browser.safari && $.browser.version <= 532.9 && window.scrollTo(0, 0),
        msgTimeout = setTimeout(function() {
            b.msg_back.hide(),
            b.msg_body.hide()
        },
        3e3)
    },
    hideAlert: function() {
        this.msg_back.hide(),
        this.msg_body.hide(),
        msgTimeout && window.clearTimeout(msgTimeout)
    },
    openShare: function() {
        if (0 == $("#share").length) {
            this.shareInfo = this.shareInfo || {},
            this.shareInfo.title = this.shareInfo.title || document.title || "",
            this.shareInfo.desc = this.shareInfo.desc || $("meta[name=Description]").attr("content"),
            this.shareInfo.images = this.shareInfo.images || fullctx + $("#brand > img").attr("lazysrc") || $("#image img:first").attr("lazysrc") || $(".article-content img:first").attr("lazysrc"),
            this.shareInfo.url = this.shareInfo.url || window.location.href;
            var a = [];
            a[a.length] = '<div class="share_box_bg" id="sharebg" onclick="appUtil.openShare();"></div>',
            a[a.length] = '<div id="share" class="share_box">',
            a[a.length] = '    <div class="share_box_tit"><span class="close" onclick="appUtil.openShare();"></span>分享到</div>',
            a[a.length] = '    <div class="box-btn phone-btn">',
            a[a.length] = '    <a id="share_to_sms"  class="button big" href="#">',
            a[a.length] = '        <img style="position:absolute;left:0px;" src="' + ctx + '/site/images/fx_smsg.png" align="absmiddle">分享到手机短信',
            a[a.length] = "        </a>",
            a[a.length] = "    </div>",
            a[a.length] = '    <div class="box-btn phone-btn">',
            a[a.length] = '    <a id="share_to_sina_wb"  class="button big"  href="#">',
            a[a.length] = '        <img style="position:absolute;left:0px;" src="' + ctx + '/site/images/fx_weibo.png" align="absmiddle">分享到新浪微博',
            a[a.length] = "        </a>",
            a[a.length] = "    </div>",
            a[a.length] = '    <div class="box-btn phone-btn" >',
            a[a.length] = '    <a id="share_to_tencent_wb"  class="button big "  href="#">',
            a[a.length] = '        <img style="position:absolute;left:0px;" src="' + ctx + '/site/images/fx_tweibo.png" align="absmiddle">分享到腾讯微博',
            a[a.length] = "        </a>",
            a[a.length] = "    </div>",
            a[a.length] = '    <div class="box-btn phone-btn" style="margin-bottom:15px;">',
            a[a.length] = '    <a id="share_to_qqzone" class="button big "  href="#" >',
            a[a.length] = '        <img style="position:absolute;left:0px;" src="' + ctx + '/site/images/fx_qqzone.png" align="absmiddle">分享到QQ空间',
            a[a.length] = "        </a>",
            a[a.length] = "    </div>",
            a[a.length] = "    </div>",
            $("body").append(a.join("")),
            this.shareInfo.shortUrl ? appUtil.createLink() : $.post(ctx + "/site/site.action.jsp", {
                action: "getShortUrl",
                url: this.shareInfo.url
            },
            function(a) {
                a.isSuccess && (appUtil.shareInfo.shortUrl = a.data, appUtil.createLink(), $("#share").show(), $("#sharebg").show())
            })
        } else "block" == $("#share").css("display") ? ($("#share").hide(), $("#sharebg").hide()) : ($("#share").show(), $("#sharebg").show());
        this.createLink = function() {
            var c, a = {
                url: appUtil.shareInfo.shortUrl,
                web_url: appUtil.shareInfo.shortUrl,
                burl: appUtil.shareInfo.shortUrl,
                showcount: "1",
                summary: encodeURIComponent(appUtil.shareInfo.desc),
                title: encodeURIComponent(appUtil.shareInfo.title),
                site: encodeURIComponent("星润国际集团"),
                pic_url: appUtil.shareInfo.images
            },
            b = [];
            for (c in a) b.push(c + "=" + (a[c] || ""));
            $("#share_to_sms").attr("href", "sms:?body=" + encodeURIComponent(appUtil.shareInfo.title) + appUtil.shareInfo.shortUrl),
            $("#share_to_sina_wb").attr("href", "http://service.weibo.com/share/share.php?title=" + encodeURIComponent(appUtil.shareInfo.title) + appUtil.shareInfo.shortUrl),
            $("#share_to_tencent_wb").attr("href", "http://share.v.t.qq.com/index.php?c=share&a=index&title=" + encodeURIComponent(appUtil.shareInfo.title) + appUtil.shareInfo.shortUrl),
            $("#share_to_qqzone").attr("href", "http://sns.z.qq.com/share?" + b.join("&"))
        }
    }
};